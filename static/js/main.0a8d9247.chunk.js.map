{"version":3,"sources":["common/AnimationContainer.js","views/Header.js","common/localStorage.js","common/helpers.js","common/Loading.js","views/BookList.js","views/Books.js","views/Book.js","views/Favorites.js","views/AdvancedSearch.js","views/SearchResult.js","views/App.js","index.js"],"names":["posed","div","enter","opacity","y","staggerChildren","beforeChildren","delay","exit","staggerDirection","activeLink","match","window","location","href","includes","Header","_ref","history","initQuery","searchInput","React","useRef","_location$pathname$sp","pathname","split","_location$pathname$sp2","Object","slicedToArray","path","param","init_query","_React$useState","useState","_React$useState2","query","setQuery","useEffect","subscription","fromEvent","current","pipe","map","e","target","value","filter","Boolean","debounceTime","distinctUntilChanged","subscribe","val","push","concat","unsubscribe","react_default","a","createElement","className","Link","to","src","alt","type","placeholder","aria-label","ref","onChange","NavLink","LS","key","JSON","parse","localStorage","getItem","err","setItem","stringify","removeItem","request","_callee","req","_req","method","url","_req$","body","_ref5","data","regenerator_default","wrap","_context","prev","next","axios","sent","error","abrupt","totalItems","t0","message","stop","getData","_callee2","pageCount","timeout","setState","_context2","loading","isFetching","get","Date","now","timestamp","set","addToLookup","truncate","text","length","slice","year","month","week","day","hour","minute","second","useFetch","_ref$timeout","_ref$deps","deps","_ref$map","v","_useState","_useState2","state","bookMapper","items","book","bookId","id","title","volumeInfo","subtitle","authors","join","publisher","publishedDate","description","rating","averageRating","language","thumb","imageLinks","smallThumbnail","thumbnail","previewUrl","previewLink","infoUrl","infoLink","country","accessInfo","pdfLink","pdf","downloadLink","webReaderLink","buyLink","saleInfo","selfLink","isFavorite","mapBook","lookup","toConsumableArray","buildRequest","_ref2","_ref2$query","_ref2$search","search","start","pageSize","Loading","role","bookLink","BookList","books","favoriteHandler","onClick","tempBooks","Books","params","_useFetch","_useInfiniteScroll","_ref3","_ref3$timeout","_ref3$map","_useState3","_useState4","handleScroll","innerHeight","scrollY","document","offsetHeight","addEventListener","removeEventListener","useInfiniteScroll","pagingData","setBooks","_React$useState3","_React$useState4","setPageCount","forEach","objectSpread","toggleFavorite","setBook","item","Book","Favorites","find","searchParams","AdvancedSearch","_useForm","form","_useState5","_useState6","changeHandler","_ref4","defineProperty","name","submitHandler","cb","preventDefault","useForm","author","subject","isbn","downloadFormat","printType","onSubmit","values","checked","htmlFor","SearchResult","INIT_QUERY","withRouter","Fragment","react_pose_es","AnimationContainer","shortid","generate","Switch","Route","component","Redirect","render","BrowserRouter","views_App","getElementById"],"mappings":"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","file":"static/js/main.0a8d9247.chunk.js","sourcesContent":["import posed from 'react-pose';\r\n\r\nexport default posed.div({\r\n  enter: {\r\n    opacity: 1,\r\n    y: 0,\r\n    staggerChildren: 50,\r\n    beforeChildren: true,\r\n    delay: 300\r\n  },\r\n  exit: {\r\n    opacity: 0,\r\n    y: 90,\r\n    staggerChildren: 20,\r\n    staggerDirection: -1\r\n  }\r\n});","import React from 'react'\r\nimport { NavLink, Link } from 'react-router-dom'\r\nimport { fromEvent } from 'rxjs'\r\nimport { map, filter, debounceTime, distinctUntilChanged } from 'rxjs/operators'\r\n\r\n// set the active nav class based on current location\r\nconst activeLink = (match) => window.location.href.includes(match)? 'active' : '';\r\n\r\nexport default function Header({ location, history, initQuery }) {\r\n  // the search input element ref\r\n  const searchInput = React.useRef(null);\r\n\r\n  // get the init_query value based on location.pathname\r\n  // to be param OR initQuery OR ''\r\n  const [ _ , path, param] = location.pathname.split('/');\r\n  const init_query = (path == 'books')? param || initQuery : '';\r\n  // get the query and setQuery state and\r\n  const [ query, setQuery ] = React.useState(init_query);\r\n\r\n  // setQuery when location pathname changes\r\n  React.useEffect( () => void setQuery(init_query), [location.pathname] );\r\n\r\n  // subscribe to the input event of searchInput ref using rxjs\r\n  React.useEffect(\r\n    () => {\r\n      // Create an Observable that will publish input chars\r\n      // map the event to the chars value\r\n      // debounce it 1 second\r\n      // get the distinct value [diff from the last one]\r\n      // subscribe and go to the books with the new query value\r\n      const subscription = fromEvent(searchInput.current, 'input')\r\n        .pipe(\r\n          map(e => e.target.value),\r\n          filter(Boolean),\r\n          debounceTime(1000),\r\n          distinctUntilChanged())\r\n        .subscribe(val => void history.push(`/books/${val}`));\r\n      // finally return the clean up function that remove the subscription\r\n      return () => void subscription.unsubscribe();\r\n    }, []);\r\n\r\n  return (\r\n    <header>\r\n      <nav className=\"row justify-content-center navbar navbar-expand-lg navbar-dark bg-dark\">\r\n        <Link className=\"navbar-brand text-light text-center col-lg-3 col-md-5 col-sm-12\" to=\"/\">\r\n          <img className=\"app-logo\" src=\"/images/books.png\" alt=\"books App\"/>\r\n          The Books Bank\r\n        </Link>\r\n        <div className=\"col-lg-5 col-md-6 col-sm-12\">\r\n          <input className=\"form-control form-control-lg w-100\"\r\n            type=\"search\"\r\n            placeholder=\"Find your favorite books here ...\"\r\n            aria-label=\"Search\"\r\n            ref={searchInput}\r\n            value={query}\r\n            onChange={ e => setQuery(e.target.value) } />\r\n        </div>\r\n        <ul className=\"navbar-nav col-lg-4 col-md-12 flex-center\">\r\n          <li className={`nav-item ${activeLink('/books')}`}>\r\n            <NavLink className=\"nav-link\" to={`/books/${initQuery}`}>Home</NavLink>\r\n          </li>\r\n          <li className={`nav-item ${activeLink('/favorites')}`}>\r\n            <NavLink className=\"nav-link\" to=\"/favorites\">Favorites</NavLink>\r\n          </li>\r\n          <li className={`nav-item ${activeLink('/advanced-search')}`}>\r\n            <NavLink className=\"nav-link\" to=\"/advanced-search\">Advanced Search</NavLink>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </header>\r\n  )\r\n}","export default class LS {\r\n  static get(key) {\r\n    try {\r\n      return JSON.parse(localStorage.getItem(key));\r\n    } catch (err) {\r\n      return localStorage.getItem(key);\r\n    }\r\n  }\r\n  static set(key, value) {\r\n    typeof value === \"object\"\r\n      ? localStorage.setItem(key, JSON.stringify(value))\r\n      : localStorage.setItem(key, value);\r\n  }\r\n  static remove(key) {\r\n    localStorage.removeItem(key);\r\n  }\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport LS from './localStorage'\r\n\r\n// get the API request and send it to the server\r\n// and return the fulfilled data OR error\r\nasync function request(req) {\r\n  const [ method, url, body = null ] = req;\r\n  try {\r\n    const { data } = await axios[method](url, body);\r\n    if (data.error)\r\n      return data.error;\r\n    if(!data || !data.totalItems)\r\n      return 'Not found!';\r\n    return data;\r\n  } catch(error) {\r\n    return error.message;\r\n  }\r\n}\r\n// managing offline first data fetching\r\n// if the needed data not exists then request it from API\r\n// when it fulfilled then save it on LS with [query_page] as the key\r\nasync function getData(req, key, pageCount, timeout, setState, map) {\r\n  // setState to the loading state\r\n  setState({ loading: true, error: '', data: [], isFetching: true });\r\n  // try get data from local storage\r\n  let data = LS.get(`raw_${key}_${pageCount}`);\r\n  // if there is stored data then check its timestamp\r\n  // if the timestamp in the given timeout\r\n  // then get the mapped data OR map the raw_data with givin map function\r\n  if(data && (Date.now() - data.timestamp) < timeout )\r\n    setState({ loading: false, error: '', data: LS.get(`${key}_${pageCount}`) || map(data, `${key}_${pageCount}`), isFetching: false });\r\n  else {\r\n    // if there isn't stored data then request data from API\r\n    data = await request(req);\r\n    // if the typeof data = 'string' then there is an error\r\n    if(typeof data === 'string')\r\n      setState({ loading: false, error: data, data: [], isFetching: false });\r\n    // if the type of any [array - object] then the data was fulfilled\r\n    else {\r\n      // and the timestamp to data\r\n      data.timestamp = Date.now();\r\n      // store it in [raw_[key]] key in local storage\r\n      LS.set(`raw_${key}_${pageCount}`, JSON.stringify(data));\r\n      // add the query keyword to the LS lookup\r\n      addToLookup(`${key}_${pageCount}`);\r\n      // delete the timestamp from data\r\n      delete data.timestamp;\r\n      // setState with the requested raw data\r\n      setState({ loading: false, error: '', data: map(data, `${key}_${pageCount}`), isFetching: false });\r\n    }\r\n  }\r\n}\r\n// truncate any string larger than 100 characters\r\nexport const truncate = (text, length) => (text && text.length > length)? text.slice(0,length-3)+'...' : text;\r\n// timestamp units by milliseconds\r\nexport const timestamp = {\r\n  year: 31536000000,  // 365 days\r\n  month: 2592000000,  // 30 days\r\n  week: 604800000,    // 7 days\r\n  day: 86400000,\r\n  hour: 3600000,\r\n  minute: 60000,\r\n  second: 1000\r\n};\r\n// add data fetching feature to any component\r\nexport function useFetch({ key, req, timeout = timestamp.month, deps = [], map = v => v }) {\r\n  const [state, setState] = useState({ loading: true, error: '', data: [], isFetching: false });\r\n  useEffect( () => {\r\n    getData(req, key, 1, timeout, setState, map);\r\n  }, deps);\r\n  return state;\r\n}\r\n// the map book\r\nconst mapBook = (query) => (book) => ({\r\n  bookId: book.id,\r\n  title: book.volumeInfo.title,\r\n  subtitle: book.volumeInfo.subtitle,\r\n  authors: book.volumeInfo.authors? book.volumeInfo.authors.join(', '): '',\r\n  publisher: book.volumeInfo.publisher,\r\n  publishedDate: book.volumeInfo.publishedDate,\r\n  description: book.volumeInfo.description,\r\n  pageCount: book.volumeInfo.pageCount,\r\n  rating: book.volumeInfo.averageRating,\r\n  language: book.volumeInfo.language,\r\n  thumb: (book.volumeInfo.imageLinks)? book.volumeInfo.imageLinks.smallThumbnail : '',\r\n  thumbnail: (book.volumeInfo.imageLinks)? book.volumeInfo.imageLinks.thumbnail : '',\r\n  previewUrl: book.volumeInfo.previewLink,\r\n  infoUrl: book.volumeInfo.infoLink,\r\n  country: book.accessInfo.country,\r\n  pdfLink: book.accessInfo.pdf.downloadLink,\r\n  webReaderLink: book.accessInfo.webReaderLink,\r\n  buyLink: book.saleInfo.buyLink,\r\n  selfLink: book.selfLink,\r\n  isFavorite: false,\r\n  query: query\r\n})\r\n// map the fetched books [get only the props that UI needs]\r\nexport const bookMapper = (data, query) => data.items.map(mapBook(query));\r\n// fill in the lookup LS key with each query page\r\nexport const addToLookup = (query) => {\r\n  let lookup = LS.get('lookup');\r\n  if (!lookup)\r\n    LS.set('lookup', [query]);\r\n  else if (!lookup.includes(query))\r\n    LS.set('lookup', [...lookup, query]);\r\n}\r\n// build the API request to google books API endpoint\r\nexport const buildRequest = ({ query = '', search = '', start, pageSize }) => {\r\n  if(query)\r\n    return ['get', `https://www.googleapis.com/books/v1/volumes?printType=books&maxResults=${pageSize}&startIndex=${start}&q=${query}`];\r\n  return ['get', `https://www.googleapis.com/books/v1/volumes?maxResults=${pageSize}&startIndex=${start}&${search}`]\r\n}\r\n// add infinite scroll feature to any component\r\nlet start = 0, pageCount = 2;\r\nexport function useInfiniteScroll({ key, pageSize, timeout = timestamp.month, map = v => v }) {\r\n  // hold the data state\r\n  // isFetching is a boolean flag to user reach the end of the page\r\n  const [state, setState] = useState({ loading: true, error: '', data: [], isFetching: false });\r\n  // scroll handler which setIsFetching to true when user reach the end of the page\r\n  const handleScroll = () => {\r\n    if (window.innerHeight + window.scrollY >= document.body.offsetHeight)\r\n      setState({ loading: true, error: '', data: [], isFetching: true });\r\n  }\r\n  // bind the scroll handler to the scroll event when component mounted\r\n  // and remove the scroll handler before component unmounted\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n  // when setIsFetching is true then call the cb function\r\n  useEffect(() => {\r\n    if (state.isFetching) {\r\n      start += pageSize;\r\n      getData(buildRequest(key,start,pageSize), key, pageCount++, timeout, setState, map);\r\n    }\r\n  }, [state.isFetching]);\r\n  // return the isFetching state\r\n  return state;\r\n}\r\n// add form state to any component\r\nexport function useForm(form) {\r\n  const [state, setState] = useState(form);\r\n  const changeHandler = ({ target }) => {\r\n    setState({\r\n      ...state,\r\n      [target.name]: target.value\r\n    });\r\n  };\r\n  const submitHandler = (cb) => (e) => {\r\n    e.preventDefault();\r\n    cb(state);\r\n  }\r\n  return {\r\n    state,\r\n    changeHandler,\r\n    submitHandler\r\n  }\r\n}","import React from 'react'\r\n\r\nexport default function Loading() {\r\n  return (\r\n    <main className=\"text-center\">\r\n      <div className=\"spinner-border\" role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </div>\r\n    </main>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { truncate } from '../common/helpers'\r\n\r\nlet bookLink = {};\r\n\r\nexport default function BookList({ books, favoriteHandler }) {\r\n  return books.map(book => {\r\n    bookLink = { pathname: `/book/${book.bookId}`, state: book };\r\n    return (\r\n      <div key={book.bookId} className=\"col-lg-3 col-md-6 col-sm-12 mb-3\">\r\n        <div className=\"card\">\r\n          <div className=\"card-header flex-between bg-primary text-light\">\r\n            <h5 className=\"card-title\">\r\n              <Link className=\"text-light\" to={bookLink}>{truncate(book.title, 15)}</Link>\r\n            </h5>\r\n            { favoriteHandler\r\n              ? <i id={book.bookId} query={book.query}\r\n                  className={`${(book.isFavorite)? 'fas': 'far'} fa-star`}\r\n                  onClick={favoriteHandler} />\r\n              : null\r\n            }\r\n          </div>\r\n          <Link to={bookLink}>\r\n            <img src={book.thumb} className=\"card-img-top\" alt={book.title} />\r\n          </Link>\r\n          <div className=\"card-footer text-center\">\r\n            <small className=\"text-muted d-block\">{book.publisher}</small>\r\n            <small className=\"text-muted d-block\">{book.country} | {book.publishedDate} | {book.language}</small>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  })\r\n}","import React from 'react';\r\nimport LS from '../common/localStorage';\r\nimport { buildRequest, useFetch, bookMapper, useInfiniteScroll } from '../common/helpers';\r\nimport Loading from '../common/Loading';\r\nimport BookList from '../views/BookList';\r\n\r\nconst pageSize = 12;\r\nlet lookups = [], tempBooks = [];\r\n\r\nexport default function Books({ match }) {\r\n  // get the query param from match route\r\n  const query = match.params.query;\r\n  // fetch API data\r\n  let { loading, error, data } = useFetch({ req: buildRequest({ query, start: 0, pageSize }), key: query, map: bookMapper });\r\n  // get the paging data\r\n  let { isFetching, data: pagingData } = useInfiniteScroll({ key: query, pageSize, map: bookMapper });\r\n  // hold the mapped books\r\n  const [books , setBooks] = React.useState([]);\r\n  // hold the page counter\r\n  const [pageCount , setPageCount] = React.useState(0);\r\n  // when API data either from [initial data] OR [pagingData] are fulfilled\r\n  // then set books state and increment pageCount\r\n  React.useEffect( () => {\r\n    if (data.length) {\r\n      setBooks(data);\r\n      setPageCount(pageCount+1);\r\n    }\r\n  }, [data.length] );\r\n  React.useEffect( () => {\r\n    if (pagingData.length) {\r\n      setBooks([...books, ...pagingData]);\r\n      setPageCount(pageCount+1);\r\n    }\r\n  }, [pagingData.length] );\r\n  // when books changed [favorite toggled] save changes to LS\r\n  // by looping through lookups keys [query_pageCount]\r\n  // and set the books that belongs to [query_pageCount]\r\n  // only if books exists in the books state\r\n  React.useEffect(() => {\r\n    if (books.length) {\r\n      lookups = LS.get('lookup');\r\n      lookups.forEach(key => {\r\n        tempBooks = books.filter(book => book.query === key);\r\n        if(tempBooks.length)\r\n          LS.set(key, tempBooks);\r\n      });\r\n    }\r\n  }, [books]);\r\n  // toggle the book isFavorite and change books state\r\n  const toggleFavorite = ({ target }) => {\r\n    setBooks(books.map(book =>\r\n      (book.bookId === target.id)\r\n        ? ({...book, isFavorite: !book.isFavorite})\r\n        : book\r\n    ));\r\n  };\r\n  // show the Loading spinner when data pending\r\n  if (loading)\r\n    return <Loading />\r\n  // show the books OR error\r\n  return (\r\n    <main className=\"row justify-content-between\">\r\n      {(error)\r\n        ? <div className=\"alert alert-danger w-100 text-center\" role=\"alert\">{error}</div>\r\n        : <BookList books={books} favoriteHandler={toggleFavorite} />\r\n      }\r\n      {(isFetching)? <Loading /> : null}\r\n    </main>\r\n  );\r\n}","import React from 'react'\r\nimport LS from '../common/localStorage'\r\n\r\nlet books = [];\r\n\r\nconst toggleFavorite = (book, setBook) => () => {\r\n  // toggle favorite in book state\r\n  setBook({ ...book, isFavorite: !book.isFavorite});\r\n  // get all books from LS which this book belongs\r\n  books = LS.get(book.query);\r\n  // update the books with this toggled favorite book\r\n  books = books.map(item =>\r\n      (item.bookId === book.bookId)\r\n        ? ({...book, isFavorite: !book.isFavorite})\r\n        : item\r\n    );\r\n  // rewrite the updated books to LS\r\n  LS.set(book.query, books);\r\n}\r\n\r\nexport default function Book({ location }) {\r\n  // hold the mapped books\r\n  const [book , setBook] = React.useState(location.state);\r\n  if(!book)\r\n    return (\r\n      <main>\r\n        <div className=\"alert alert-warning w-100 text-center\" role=\"alert\">Book Not Found ...</div>\r\n      </main>\r\n    )\r\n  return (\r\n    <main>\r\n      <div className=\"card mb-3\">\r\n        <div className=\"card-header flex-between bg-primary text-light\">\r\n          <h3 className=\"card-title\">{book.title}</h3>\r\n          <i id={book.bookId} className={`${(book.isFavorite) ? 'fas' : 'far'} fa-star`}\r\n              onClick={toggleFavorite(book,setBook)} />\r\n        </div>\r\n        <div className=\"card-body flex-around-top\">\r\n          <img className=\"flex-b-30\" src={book.thumb} alt={book.title} />\r\n          <div className=\"flex-b-60\">\r\n            <h4 className=\"card-subtitle mb-2 text-muted\">{book.subtitle}</h4>\r\n            <p className=\"card-text\">Author(s): {book.authors}</p>\r\n            <p className=\"card-text\">{book.description}</p>\r\n            <p className=\"card-text\">Publisher: {book.publisher}</p>\r\n            <p className=\"card-text\">Published Date: {book.publishedDate}</p>\r\n            <p className=\"card-text\">Country: {book.country}</p>\r\n            <p className=\"card-text\">Language: {book.language}</p>\r\n            <p className=\"card-text\">Page Count: {book.pageCount}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"card-footer text-center\">\r\n          <a target=\"_blank\" href={book.infoUrl} className=\"card-link\">More Info Link</a>\r\n          <a target=\"_blank\" href={book.previewUrl} className=\"card-link\">Preview Link</a>\r\n          <a target=\"_blank\" href={book.webReaderLink} className=\"card-link\">Web Reader Link</a>\r\n          { book.pdfLink && <a target=\"_blank\" href={book.pdfLink} className=\"card-link\">PDF Link</a>}\r\n          { book.buyLink && <a target=\"_blank\" href={book.buyLink} className=\"card-link\">Buy Link</a>}\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}","import React from 'react';\r\nimport LS from '../common/localStorage';\r\nimport BookList from '../views/BookList';\r\n\r\nlet lookups = [],\r\n    tempBooks = [],\r\n    book = {};\r\n\r\nexport default function Favorites({ match }) {\r\n  // hold the mapped books\r\n  const [books , setBooks] = React.useState([]);\r\n  // when component mount get all lookup keys from LS\r\n  // looping through lookups keys [query_pageCount]\r\n  // and fill the books with only books that isFavorite is true\r\n  React.useEffect(() => {\r\n    lookups = LS.get('lookup');\r\n    lookups.forEach(key => void setBooks( [...books, ...LS.get(key).filter(book => book.isFavorite)] ));\r\n  }, []);\r\n  // get this book and remove it from books state\r\n  // and set isFavorite to false and rewrite it to LS\r\n  const removeFavorite = ({ target }) => {\r\n    book = books.find(book => book.bookId === target.id);\r\n    setBooks(books.filter(book => book.bookId !== target.id));\r\n    // get all books from LS which this book belongs\r\n    tempBooks = LS.get(book.query);\r\n    // update the books with this book setting isFavorite to false\r\n    tempBooks = tempBooks.map(item =>\r\n      (item.bookId === book.bookId)\r\n        ? ({ ...book, isFavorite: false })\r\n        : item\r\n    );\r\n    // rewrite the updated books to LS\r\n    LS.set(book.query, tempBooks);\r\n  };\r\n  // if favorite books doesn't exists show not found\r\n  if (!books)\r\n    return (\r\n      <main>\r\n        <div className=\"alert alert-warning w-100 text-center\" role=\"alert\">Favorite Books Not Found ...</div>\r\n      </main>\r\n    )\r\n  // show the favorite books\r\n  return (\r\n    <main className=\"row justify-content-center\">\r\n      <BookList books={books} favoriteHandler={removeFavorite} />\r\n    </main>\r\n  );\r\n}","import React from 'react'\r\nimport { useForm } from '../common/helpers'\r\n\r\nlet searchParams = '';\r\n\r\nexport default function AdvancedSearch({ history }) {\r\n  const { state, changeHandler, submitHandler } = useForm({\r\n    'title': '',\r\n    'author': '',\r\n    'publisher': '',\r\n    'subject': '',\r\n    'isbn': '',\r\n    'downloadFormat': '',\r\n    'filter': '',\r\n    'printType': ''\r\n  });\r\n\r\n  const search = (values) => {\r\n    // get the form fields\r\n    const { title, author, publisher, subject, isbn, downloadFormat, filter, printType } = values;\r\n    // clear the prev search params\r\n    searchParams = '';\r\n    // build the search params string\r\n    if(title)\r\n      searchParams += `q=intitle:${values.title}`;\r\n    if(author)\r\n      searchParams += (searchParams)? `+inauthor:${author}` : `q=inauthor:${author}`;\r\n    if(publisher)\r\n      searchParams += (searchParams)? `+inpublisher:${publisher}` : `q=inpublisher:${publisher}`;\r\n    if(subject)\r\n      searchParams += (searchParams)? `+subject:${subject}` : `q=subject:${subject}`;\r\n    if(isbn)\r\n      searchParams += (searchParams)? `+isbn:${isbn}` : `q=isbn:${isbn}`;\r\n    if(downloadFormat)\r\n      searchParams += `&download=${downloadFormat}`;\r\n    if(filter)\r\n      searchParams += `&filter=${filter}`;\r\n    if(printType)\r\n      searchParams += `&printType=${printType}`;\r\n    // go to search-result with this search params to fetch and display the result\r\n    history.push(`/search-result/${searchParams}`);\r\n  }\r\n\r\n  return (\r\n    <main>\r\n      <h3>Advanced Search</h3>\r\n      <hr/>\r\n      <form className=\"row\" onSubmit={submitHandler(search)}>\r\n        <div className=\"col-lg-6 col-md-12\">\r\n          <input type=\"text\" className=\"form-control mb-2\" placeholder=\"Title\"     name=\"title\"     value={state.title}     onChange={changeHandler} />\r\n          <input type=\"text\" className=\"form-control mb-2\" placeholder=\"Author\"    name=\"author\"    value={state.author}    onChange={changeHandler} />\r\n          <input type=\"text\" className=\"form-control mb-2\" placeholder=\"Publisher\" name=\"publisher\" value={state.publisher} onChange={changeHandler} />\r\n          <input type=\"text\" className=\"form-control mb-2\" placeholder=\"Subject\"   name=\"subject\"   value={state.subject}   onChange={changeHandler} />\r\n          <input type=\"text\" className=\"form-control mb-2\" placeholder=\"ISBN\"      name=\"isbn\"      value={state.isbn}      onChange={changeHandler} />\r\n        </div>\r\n        <div className=\"col-lg-6 col-md-12\">\r\n          {/* Download Format */}\r\n          <div className=\"mb-2\">\r\n            <div>Download Format:</div>\r\n            <div className=\"form-check form-check-inline\">\r\n              <input className=\"form-check-input\" id=\"epub\" type=\"checkbox\" name=\"downloadFormat\"\r\n                value=\"epub\" checked={state.downloadFormat === \"epub\"} onChange={changeHandler} />\r\n              <label className=\"form-check-label\" htmlFor=\"epub\">epub</label>\r\n            </div>\r\n          </div>\r\n          {/* Payment and Preview Ability  [filter] */}\r\n          <div className=\"mb-2\">\r\n            <div>Payment And Preview Ability:</div>\r\n            <div className=\"form-check form-check-inline\">\r\n              <input className=\"form-check-input\" id=\"full-preview\" type=\"radio\" name=\"filter\"\r\n                value=\"full\" checked={state.filter === \"full\"} onChange={changeHandler} />\r\n              <label className=\"form-check-label\" htmlFor=\"full-preview\">full-preview</label>\r\n            </div>\r\n            <div className=\"form-check form-check-inline\">\r\n              <input className=\"form-check-input\" id=\"partial-preview\" type=\"radio\" name=\"filter\"\r\n                value=\"partial\" checked={state.filter === \"partial\"} onChange={changeHandler} />\r\n              <label className=\"form-check-label\" htmlFor=\"partial-preview\">partial-preview</label>\r\n            </div>\r\n            <div className=\"form-check form-check-inline\">\r\n              <input className=\"form-check-input\" id=\"free-ebooks\" type=\"radio\" name=\"filter\"\r\n                value=\"free-ebooks\" checked={state.filter === \"free-ebooks\"} onChange={changeHandler} />\r\n              <label className=\"form-check-label\" htmlFor=\"free-ebooks\">free-ebooks</label>\r\n            </div>\r\n            <div className=\"form-check form-check-inline\">\r\n              <input className=\"form-check-input\" id=\"paid-ebooks\" type=\"radio\" name=\"filter\"\r\n                value=\"paid-ebooks\" checked={state.filter === \"paid-ebooks\"} onChange={changeHandler} />\r\n              <label className=\"form-check-label\" htmlFor=\"paid-ebooks\">paid-ebooks</label>\r\n            </div>\r\n            <div className=\"form-check form-check-inline\">\r\n              <input className=\"form-check-input\" id=\"ebooks\" type=\"radio\" name=\"filter\"\r\n                value=\"ebooks\" checked={state.filter === \"ebooks\"} onChange={changeHandler} />\r\n              <label className=\"form-check-label\" htmlFor=\"ebooks\">ebooks (free+paid+full-preview)</label>\r\n            </div>\r\n          </div>\r\n          {/* Print Type */}\r\n          <div className=\"mb-2\">\r\n            <div>Print Type:</div>\r\n            <div className=\"form-check form-check-inline\">\r\n              <input className=\"form-check-input\" id=\"all\" type=\"radio\" name=\"printType\"\r\n                value=\"all\" checked={state.printType === \"all\"} onChange={changeHandler} />\r\n              <label className=\"form-check-label\" htmlFor=\"all\">all</label>\r\n            </div>\r\n            <div className=\"form-check form-check-inline\">\r\n              <input className=\"form-check-input\" id=\"books\" type=\"radio\" name=\"printType\"\r\n                value=\"books\" checked={state.printType === \"books\"} onChange={changeHandler} />\r\n              <label className=\"form-check-label\" htmlFor=\"books\">books</label>\r\n            </div>\r\n            <div className=\"form-check form-check-inline\">\r\n              <input className=\"form-check-input\" id=\"magazines\" type=\"radio\" name=\"printType\"\r\n                value=\"magazines\" checked={state.printType === \"magazines\"} onChange={changeHandler} />\r\n              <label className=\"form-check-label\" htmlFor=\"magazines\">magazines</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <button className=\"btn btn-primary btn-lg w-25 mx-auto\">Search</button>\r\n      </form>\r\n    </main>\r\n  );\r\n}","import React from 'react'\r\nimport { buildRequest, useFetch, bookMapper } from '../common/helpers';\r\nimport Loading from '../common/Loading';\r\nimport BookList from '../views/BookList';\r\n\r\nexport default function SearchResult({ match }) {\r\n  // get the query param from match route\r\n  const search = match.params.search;\r\n  // fetch API data\r\n  let { loading, error, data } = useFetch({ req: buildRequest({ search, start: 0, pageSize: 40 }), key: search, map: bookMapper });\r\n  // show the Loading spinner when data pending\r\n  if (loading)\r\n    return <Loading />\r\n  return (\r\n    <main className=\"row justify-content-center\">\r\n      {(error)\r\n        ? <div className=\"alert alert-danger w-100 text-center\" role=\"alert\">{error}</div>\r\n        : <BookList books={data} favoriteHandler={null} />\r\n      }\r\n    </main>\r\n  )\r\n}\r\n","import React from 'react';\nimport { Switch, Route, Redirect, withRouter } from 'react-router-dom';\nimport { PoseGroup } from 'react-pose';\nimport shortid from 'shortid';\nimport AnimationContainer from '../common/AnimationContainer';\nimport Header from './Header';\nimport Books from './Books';\nimport Book from './Book';\nimport Favorites from './Favorites';\nimport AdvancedSearch from './AdvancedSearch';\nimport SearchResult from './SearchResult';\nimport './app.css';\n\nconst INIT_QUERY = 'birds';\n\nfunction App({ location, history }) {\n  return (\n    <>\n      <Header location={location} history={history} initQuery={INIT_QUERY} />\n      <div className=\"container\">\n        <PoseGroup>\n          <AnimationContainer key={shortid.generate()}>\n            <Switch location={location}>\n              <Route path=\"/books/:query\" component={Books} />\n              <Route path=\"/book/:id\" component={Book} />\n              <Route path=\"/favorites\" component={Favorites} />\n              <Route path=\"/advanced-search\" component={AdvancedSearch} />\n              <Route path=\"/search-result/:search\" component={SearchResult} />\n              <Redirect to={`/books/${INIT_QUERY}`} />\n            </Switch>\n          </AnimationContainer>\n        </PoseGroup>\n      </div>\n    </>\n  );\n}\n\nexport default withRouter(App);","import React from 'react';\nimport { render } from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './views/App';\nimport './index.css';\n\nrender(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);"],"sourceRoot":""}